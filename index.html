<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <script defer>
      function modifyUrl(urlString) {
        try {
          if (urlString.indexOf("takahashinguyen.github.io") !== -1)
            return urlString.replace(
              "takahashinguyen.github.io/",
              "takahashinguyen.github.io/TakahashiNguyen/"
            );
          else return urlString.replace("3002/", "3002/TakahashiNguyen/");
        } catch (error) {
          return urlString;
        }
      }

      function getBodyContent(htmlString) {
        const parser = new DOMParser();
        const doc = parser.parseFromString(htmlString, "text/html");
        document.querySelector("body").className =
          doc.querySelector("body").className;

        Array.from(doc.body.childNodes)
          .filter((child) => child.nodeType === Node.ELEMENT_NODE)
          .forEach((child) => document.body.appendChild(child));
        Array.from(doc.head.childNodes)
          .filter((child) => child.nodeType === Node.ELEMENT_NODE)
          .forEach((child) => {
            var tag = document.createElement("script");
            if (child instanceof HTMLLinkElement)
              child.href = modifyUrl(child.href);

            if (child instanceof HTMLScriptElement) {
              if (child.src !== "") {
                var tagURL = modifyUrl(child.src);
                fetch(tagURL)
                  .then((response) => response.text())
                  .then((data) => {
                    tag.textContent = data;
                    if (data.indexOf("scriptDOMContentLoaded") !== -1) {
                      scriptDOMContentLoaded();
                    }
                  })
                  .catch((error) => {
                    tag.src = tagURL;
                  });
              } else {
                tag.textContent = child.innerText;
              }
            } else {
              tag = child;
            }
            document.head.appendChild(tag);
          });
      }

      fetch("TakahashiNguyen/index.html")
        .then((response) => response.text())
        .then((data) => {
          getBodyContent(data);
        })
        .catch((error) => {
          console.error("Error fetching content:", error);
        });
    </script>
  </head>
  <body></body>
</html>
